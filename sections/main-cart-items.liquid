{% comment %}theme-check-disable UnusedAssign{% endcomment %}
{%- unless settings.catalog_mode -%}
    {%- liquid
      assign layout = 'main-cart-items'
    -%}
    <div class="ps-page ps-page--blog" style="margin-top: {{ section.settings.margin_top }}px; margin-bottom: {{ section.settings.margin_bottom }}px; padding-top: {{ section.settings.padding_top }}px; padding-bottom: {{ section.settings.padding_bottom }}px;">
        <div class="ps-page__header">
            <div class="container">
                <h1 class="ps-page__heading">{{ 'sections.cart.title' | t }}</h1>
                {% render 'breadcrumb' %}
            </div>
        </div>
        <div class="ps-page__content">
            <div class="container">
                <cart-items class="page-width{% if cart == empty %} is-empty{% endif %}" id="main-cart-items" data-id="{{ section.id }}">
                    <div class="holder mt-global" {% render 'section-style', section: section %}>
                        <div class="show-on-scroll">
                            <div class="js-contents-cart-items-empty">
                                <div class="cart-empty text-center">
                                    <div class="cart-empty-icon">
                                        {% render 'icon-empty-cart' %}
                                    </div>
                                    <h2 class="cart-empty-title">{{ 'sections.cart.empty' | t }}</h2>
                                    <div class="cart-empty-text">{{ 'general.empty_description' | t }}</div>
                                    <div class="mt-3">
                                        <a href="{{ routes.all_products_collection_url }}" class="ps-btn">{{ 'general.continue_shopping' | t }}</a>
                                    </div>
                                </div>
                            </div>
                        
                            <div class="row vert-margin-middle">
                                <div class="col-xl-8 aside aside--content">
                                    <div class="js-contents-cart-items">
                                        <div class="cart-table-page-title align-items-center d-flex mb-2">
                                        {% render 'free-shipping-status' layout: layout %}
                                        </div>
                                        <form action="{{ routes.cart_url }}" class="critical-hidden" method="post" id="cart">
                                            <div data-id="{{ section.id }}">
                                                {%- if cart != empty -%}
                                                <div class="cart-table border-bottom-0" id="cartTable">
                                                    <div class="visually-hidden">{{ 'sections.cart.title' | t }}</div>
                                                    {%- liquid
                                                    assign cart_items = cart.items
                                
                                                    if settings.header_cart_order_reverted
                                                        assign cart_items = cart.items | reverse
                                                    endif
                                                    -%}
                                                    {%- for item in cart_items -%}
                                                    <div class="cart-table-prd" id="CartItem-{{ item.index | plus: 1 }}">
                                                        <div class="cart-table-prd-image {% unless item.image %}d-none{% endunless %}">
                                                        {% if item.image %}
                                                            <a href="{{ item.url }}">
                                                            <img src="{{ item.image | image_url: width: 100 }}" alt=""/>
                                                            </a>
                                                            {%- if item.selling_plan_allocation != nil -%}
                                                            <div class="subscription-label">{{ 'general.badge_cart_subscription' | t }}</div>
                                                            {%- endif -%}
                                                        {% endif %}
                                                        </div>
                                                        <div class="cart-table-prd-content-wrap">
                                                        <div class="cart-table-prd-info">
                                                            {%- if section.settings.show_vendor -%}
                                                            <p class="cart-table-vendor">{{ item.product.vendor }}</p>
                                                            {%- endif -%}
                                                            <h2 class="cart-table-prd-name">
                                                            <a href="{{ item.url }}">{{ item.product.title | escape }}</a>
                                                            </h2>
                                                            {%- if item.product.has_only_default_variant == false or item.properties.size != 0 -%}
                                                            <dl>
                                                                {%- if item.product.has_only_default_variant == false -%}
                                                                {%- for option in item.options_with_values -%}
                                                                    <div class="cart-table-product-option">
                                                                    <dt>{{ option.name }}:</dt>
                                                                    <dd>{{ option.value }}</dd>
                                                                    </div>
                                                                {%- endfor -%}
                                                                {%- endif -%}
                                                                {%- for property in item.properties -%}
                                                                {%- assign property_first_char = property.first | slice: 0 -%}
                                                                {%- if property.last != blank and property_first_char != '_' -%}
                                                                    <div class="cart-table-product-option">
                                                                    <dt>{{ property.first }}:</dt>
                                                                    <dd>
                                                                        {%- if property.last contains '/uploads/' -%}
                                                                        <a href="{{ property.last }}" class="link" target="_blank">
                                                                            {{ property.last | split: '/' | last }}
                                                                        </a>
                                                                        {%- else -%}
                                                                        {{ property.last }}
                                                                        {%- endif -%}
                                                                    </dd>
                                                                    </div>
                                                                {%- endif -%}
                                                                {%- endfor -%}
                                                            </dl>
                                                            {%- endif -%}
                                                            {%- if item.selling_plan_allocation.selling_plan.name != blank -%}
                                                            <p class="prd-prepay-text"  data-tippy-placement="bottom" data-tippy-content="{{ item.selling_plan_allocation.selling_plan.description | escape }}">{{ item.selling_plan_allocation.selling_plan.name }}</p>
                                                            {%- endif -%}
                                                        </div>
                                                        <div class="cart-table-prd-price">
                                                            {% render 'main-cart-item-component-price', item: item %}
                                                        </div>
                                                        <div class="cart-table-prd-qty" data-node-desktop>
                                                            {% render 'quantity',
                                                            item: item,
                                                            name: 'updates[]',
                                                            value: item.quantity,
                                                            min: 0,
                                                            in_cart: true,
                                                            product_title: item.product.title,
                                                            current_variant: item.variant,
                                                            layout: layout
                                                            %}
                                                        </div>
                                                        <div class="cart-table-prd-price-total position-relative">
                                                            {% render 'main-cart-item-component-final-price', item: item %}
                                                        </div>
                                                        </div>
                                                        <div class="cart-table-prd-action">
                                                        <cart-remove-button data-index="{{ item.index | plus: 1 }}">
                                                            <a href="{{ item.url_to_remove }}" class="cart-table-prd-remove position-relative" aria-label="{{ 'sections.cart.remove_title' | t: title: item.title }}" title="{{ 'sections.cart.remove_title' | t: title: item.title }}">{% render 'icon-remove2' %}
                                                                <div class="loading-overlay__spinner hidden">
                                                                    <div data-load="loading"></div>
                                                                </div>
                                                            </a>
                                                        </cart-remove-button>
                                                        </div>
                                                        <div class="cart-table-prd-discount">
                                                        <ul class="discounts list-unstyled" role="list" aria-label="{{ 'customer.order.discount' | t }}">
                                                            {%- for discount in item.discounts -%}
                                                            <li class="discounts__discount">
                                                                {%- render 'icon-discount' -%}
                                                                {{ discount.title }}
                                                            </li>
                                                            {%- endfor -%}
                                                        </ul>
                                                        </div>
                                                        <div class="cart-table-mobile">
                                                        <div class="cart-table-prd-price">
                                                            {% render 'main-cart-item-component-price', item: item %}
                                                        </div>
                                                        <div class="cart-table-prd-qty" data-node-mobile></div>
                                                        <div class="cart-table-prd-price-total">
                                                            {% render 'main-cart-item-component-final-price', item: item %}
                                                        </div>
                                                        </div>
                                                        <div class="cart-item__error hidden" id="Line-item-error-{{ item.index | plus: 1 }}" role="alert">
                                                        <small class="cart-item__error-text"></small>
                                                        {% render 'icon-alert' %}
                                                        </div>
                                                    </div>
                                                    {%- endfor -%}
                                                </div>
                                                <div class="mt-3 text-center">
                                                    <a href="{{ routes.all_products_collection_url }}" class="ps-btn text-capitalize ps-btn--gray"><span>{{ 'general.continue_shopping' | t }}</span></a>
                                                </div>
                                                {%- endif -%}
                                            </div>
                                            <p class="visually-hidden" id="cart-live-region-text" aria-live="polite" role="status"></p>
                                            <p class="visually-hidden" id="shopping-cart-line-item-status" aria-live="polite" aria-hidden="true" role="status">{{ 'accessibility.loading' | t }}</p>
                                        </form>
                                    </div>
                                </div>
                                <div class="col-xl-4 cart-page-column aside aside--sidebar aside--right aside--sticky--xl js-sticky-collision" role="complementary">
                                    <div class="aside-content">
                                        <div class="card-total bg-alt">
                                            <div class="card-total-inside" {{ block.shopify_attributes }}>
                                                {% for block in section.blocks %}
                                                    {%- case block.type -%}
                                                    {%- when '@app' -%}
                                                    {% render block %}
                                                    {%- when 'subtotal' -%}
                                                        <div class="js-contents-subtotal">
                                                            <h4 class="card-total-title">{{ 'general.your_order' | t }}</h4>
                                        
                                                            {%- if cart.cart_level_discount_applications.size > 0 -%}
                                                            <div class="row mt-1">
                                                                <div class="col-auto">
                                                                <ul class="discounts list-unstyled" role="list" aria-label="{{ 'customer.order.discount' | t }}">
                                                                {%- for discount in cart.cart_level_discount_applications -%}
                                                                    <li class="discounts__discount discounts__discount--end">
                                                                    {%- render 'icon-discount' -%}
                                                                    {{ discount.title }}
                                                                    (-{{ discount.total_allocated_amount | money }})
                                                                    </li>
                                                                {%- endfor -%}
                                                                </ul>
                                                                </div>
                                                            </div>
                                                            {%- endif -%}
                                        
                                                            <div class="row mt-1">
                                                                <div class="col-auto">
                                                                {%- if cart.taxes_included and shop.shipping_policy.body != blank -%}
                                                                    {{ 'sections.cart.taxes_included_and_shipping_policy_html' | t: link: shop.shipping_policy.url }}
                                                                    {%- elsif cart.taxes_included -%}
                                                                    {{ 'sections.cart.taxes_included_but_shipping_at_checkout' | t }}
                                                                    {%- elsif shop.shipping_policy.body != blank -%}
                                                                    {{ 'sections.cart.taxes_and_shipping_policy_at_checkout_html' | t: link: shop.shipping_policy.url }}
                                                                {%- else -%}
                                                                    {{ 'sections.cart.taxes_and_shipping_at_checkout' | t }}
                                                                {%- endif -%}
                                                                </div>
                                                            </div>
                                        
                                                            <div class="row card-total-summa mt-1">
                                                                <div class="col text-uppercase">{{ 'sections.cart.subtotal' | t }}:</div>
                                                                <div class="col-auto">{{ cart.total_price | money_with_currency }}</div>
                                                            </div>
                                                        </div>
                                                        {%- else -%}
                                                        <div class="row flex-column" {{ block.shopify_attributes }}>
                                                            <div class="col  position-relative">
                                                                <button name="checkout"{% if cart == empty %} disabled{% endif %} form="cart" type="submit" data-button=".shopify-payment-agree" id="checkout" class="ps-btn w-100 btn--cartpage-checkout {% if settings.checkout_agreement %}shopify-payment-agree disabled{% endif %}"><span>{{ 'sections.cart.checkout' | t }}</span></button>
                                                                {% if settings.checkout_agreement %}<info-popup data-ajax="{{ routes.root_url }}?section_id=async-agreement-info" data-selector="#agreementInfo"><span></span></info-popup>{% endif %}
                                                            </div>
                                                            {%- if additional_checkout_buttons -%}
                                                                <div class="col">
                                                                    <div class="additional-checkout-buttons {% if settings.checkout_agreement %}shopify-payment-agree disabled{% endif %}">
                                                                        {{ content_for_additional_checkout_buttons }}
                                                                    </div>
                                                                </div>
                                                            {%- endif -%}
                                                            {%- if settings.checkout_agreement -%}
                                                                <div id="prd-block-agreement" class="prd-block-agreement custom-form" data-agree>
                                                                    <input id="agreementCheckboxMaincart" class="js-agreement-checkbox" data-button=".shopify-payment-agree" name="agreementCheckboxProductPage" type="checkbox" {% if settings.checkout_agreement_check_by_default %}checked{% endif %}>
                                                                    <label for="agreementCheckboxMaincart"><info-popup data-ajax="{{ routes.root_url }}?section_id=async-agreement-info" data-selector="#agreementInfo"><a href="#" class="modal-info-link">{{ 'general.agree_to_the_terms' | t }}</a></info-popup></label>
                                                                </div>
                                                            {%- endif -%}
                                                        </div>
                                                    {%- endcase -%}
                                                {% endfor %}
                                                <div id="cart-errors"></div>
                                            </div>
                                        </div>
                                        
                                        <div class="block-accordion">
                                            <form data-click="radio">
                                                <div class="tab-accordion-item card-tab-accordion-item">
                                                    <input type="checkbox" name="tab-accordion" id="tabAccordion3" class="js-cart-page-note-checkbox">
                                                    <label for="tabAccordion3" data-text="{{ 'general.add_note' | t }}">{{ 'general.add_note' | t }}
                                                    <span></span></label>
                                                    <div class='tab-accordion-item-content js-set-height'>
                                                    <div class="tab-accordion-item-content-inside">
                                                        <p>{{ 'general.note_description' | t }}</p>
                                                        <div class="mt-2"></div>
                                                        <div class="form-group">
                                                        <label>{{ 'general.note' | t }}:</label>
                                                        <div class="form-control-wrap">
                                                            <cart-note>
                                                                <textarea-autosize data-maxheight="87"><textarea class="form-control js-textarea-autosize" name="note" form="cart"  placeholder="{{ 'sections.cart.note' | t }}">{{ cart.note }}</textarea></textarea-autosize>
                                                            </cart-note>
                                                        </div>
                                                        </div>
                                                    </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                        
                                        <div class="mt-5 text-center">
                                            <cart-clear-button>
                                                <a href="{{ routes.cart_clear_url }}" class="link-clear-cart btn-link btn-link--sm"><span class="icon-wrap">{% render 'icon-remove2' %}</span><span>{{ 'general.clear_cart' | t }}</span>
                                                <div class="loading-overlay hidden">
                                                    <div data-load="loading"></div>
                                                </div>
                                                </a>
                                            </cart-clear-button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </cart-items>
            </div>
        </div>
    </div>
{%- endunless -%}
    
{% schema %}
    {
      "name": "t:sections.main-cart-items.name",
      "settings": [
        {
            "type": "header",
            "content": "Spacing Options"
        },
        {
            "type": "range",
            "id": "margin_top",
            "min": 0,
            "max": 100,
            "step": 5,
            "unit": "px",
            "label": "Margin Top",
            "default": 0
        },
        {
            "type": "range",
            "id": "margin_bottom",
            "min": 0,
            "max": 100,
            "step": 5,
            "unit": "px",
            "label": "Margin Bottom",
            "default": 0
        },
        {
            "type": "range",
            "id": "padding_top",
            "min": 0,
            "max": 100,
            "step": 5,
            "unit": "px",
            "label": "Padding Top",
            "default": 0
        },
        {
            "type": "range",
            "id": "padding_bottom",
            "min": 0,
            "max": 100,
            "step": 5,
            "unit": "px",
            "label": "Padding Bottom",
            "default": 0
        }
      ],
      "blocks": [
        {
          "type": "subtotal",
          "name": "t:sections.main-cart-items.blocks.subtotal.name",
          "limit": 1
        },
        {
          "type": "buttons",
          "name": "t:sections.main-cart-items.blocks.buttons.name",
          "limit": 1
        },
        {
          "type": "@app"
        }
      ]
    }
{% endschema %}