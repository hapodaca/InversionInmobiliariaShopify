<div class="ps-section ps-property-types with-carousel with-desktop-slider"
     style="margin-top: {{ section.settings.margin_top }}px; margin-bottom: {{ section.settings.margin_bottom }}px; padding-top: {{ section.settings.padding_top }}px; padding-bottom: {{ section.settings.padding_bottom }}px;">
  <div class="container">
    <div class="ps-section__header">
      <h3 class="ps-section__heading">{{ section.settings.heading }}</h3>
      <div class="ps-section__carousel-navigation">
        <a class="ps-btn--carouse-arrow prev" href="#carousel-property-types" aria-label="Button prev">
          <i class="lnil lnil-chevron-left"></i>
        </a>
        <a class="ps-btn--carouse-arrow next" href="#carousel-property-types" aria-label="Button next">
          <i class="lnil lnil-chevron-right"></i>
        </a>
      </div>
    </div>

    <div class="ps-section__content">
      <div class="owl-slider ps-carousel desktop-slider"
           data-owl-nav="true"
           data-owl-auto="{{ section.settings.slider_autoplay }}"
           data-owl-loop="{{ section.settings.slider_loop }}"
           data-owl-speed="{{ section.settings.slider_speed }}"
           data-owl-gap="{{ section.settings.slider_gap }}"
           data-owl-item="{{ section.settings.slider_items }}"
           data-owl-duration="{{ section.settings.slider_duration }}"
           data-owl-mousedrag="{{ section.settings.slider_mousedrag }}"
           id="carousel-property-types">

        {%- for block in section.blocks -%}
          <div class="ps-block--property-type"
               {% if block.settings.image != blank %}
               style="background-image: url('{{ block.settings.image | image_url }}');"
               {% else %}
               style="background-color: #e0e0e0;"
               {% endif %}>
            
            <div class="ps-block__overlay"></div>
            {% if block.settings.heading != blank or block.settings.desc != blank %}
              <div class="ps-block__content">
                {% if block.settings.heading != blank %}
                  <h4>{{ block.settings.heading }}</h4>
                {% endif %}
                {% if block.settings.desc != blank %}
                  <p>{{ block.settings.desc }}</p>
                {% endif %}
              </div>
            {% endif %}
            {% if block.settings.url != blank %}
              <a href="{{ block.settings.url }}" class="ps-block__link"></a>
            {% endif %}
          </div>
          
        {%- endfor -%}

      </div>
    </div>
  </div>
</div>

<style>
/* === TIPOS DE INVERSIÓN - FONDO EN EL CONTENEDOR PRINCIPAL === */
/* === TIPOS DE INVERSIÓN (ESTILO CORPORATIVO A JUEGO CON EL SITIO) === */

#carousel-property-types .ps-block--property-type {
  position: relative;
  overflow: hidden;
  border-radius: 12px;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  transition: all 0.3s ease;
  cursor: pointer;
  aspect-ratio: 16 / 9;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

/* Hover: zoom sutil + sombra elegante */
#carousel-property-types .ps-block--property-type:hover {
  transform: scale(1.015);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
}

/* Overlay con fondo oscuro suave */
.ps-block__overlay {
  position: absolute;
  inset: 0;
  /*background: rgba(0, 43, 91, 0.4);  azul marino con opacidad */
  z-index: 1;
  transition: background 0.3s ease;
}

/* Hover: overlay más oscuro */
#carousel-property-types .ps-block--property-type:hover .ps-block__overlay {
  background: rgba(0, 43, 91, 0.6);
}

/* Enlace invisible que cubre todo */
.ps-block__link {
  position: absolute;
  inset: 0;
  z-index: 2;
  display: block;
}

/* Contenido de texto centrado */
.ps-block__content {
  position: relative;
  z-index: 3;
  text-align: center;
  padding: 20px;
  color: white;
  text-shadow: 0 2px 3px rgba(0, 0, 0, 0.7);
  transition: transform 0.3s ease;
}

/* Hover: texto flota ligeramente */
#carousel-property-types .ps-block--property-type:hover .ps-block__content {
  transform: translateY(-4px);
}

/* Título */
.ps-block__content h4 {
  font-size: 20px;
  font-weight: 700;
  margin-bottom: 8px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Descripción */
.ps-block__content p {
  font-size: 14px;
  font-weight: 400;
  margin: 0;
  opacity: 0.95;
  line-height: 1.5;
}

/* Responsive */
@media (max-width: 768px) {
  .ps-block__content h4 { font-size: 16px; }
  .ps-block__content p { font-size: 13px; }
}

@media (max-width: 480px) {
  .ps-block__content h4 { font-size: 14px; }
  .ps-block__content p { font-size: 12px; }
}

/* Enlace invisible que cubre todo */
.ps-block__link {
  position: absolute;
  inset: 0;
  z-index: 10;       /* ← subimos por encima del contenido (antes era 2) */
  display: block;
}

/* Dejar pasar los clics a la capa del link */
.ps-block__content,
.ps-block__overlay {
  pointer-events: none;   /* ← evita que estas capas “roben” el click */
}


  /* --- SOLO MÓVIL: grid de 3 columnas cuando Owl NO está cargado --- */
  @media (max-width: 767px) {
    /* Si el carrusel NO está inicializado (sin .owl-loaded), usa grid */
    #carousel-property-types:not(.owl-loaded) {
      display: grid !important;
      grid-template-columns: repeat(3, 1fr) !important;
      gap: 12px !important; /* ajusta si quieres más/menos separación */
    }
    #carousel-property-types:not(.owl-loaded) .ps-block--property-type {
      width: 100% !important;
      margin: 0 !important;
      /* mantiene tu proporción 16:9 y estilos ya definidos */
    }

    /* Evita que alguna regla móvil del tema aplique flex/overrides indeseados */
    #carousel-property-types .owl-stage { display: block !important; }
    #carousel-property-types .owl-item  { display: block !important; }
  }
</style>


{% schema %}
{
  "name": "t:sections.property_types.name",
  "tag": "section",
  "class": "homepage-one",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "default": "Property Types",
      "label": "t:sections.property_types.settings.heading.label"
    },
    {
      "type": "header",
      "content": "t:settings_schema.slider.name"
    },
    {
      "type": "range",
      "id": "slider_items",
      "min": 1,
      "max": 6,
      "step": 1,
      "unit": "i",
      "label": "Número de items visibles",
      "default": 3
    },
    {
      "type": "range",
      "id": "slider_gap",
      "min": 10,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "t:settings_schema.slider.settings.slider_gap.label",
      "default": 30
    },
    {
      "type": "range",
      "id": "slider_speed",
      "min": 3000,
      "max": 9000,
      "step": 500,
      "unit": "ms",
      "label": "t:settings_schema.slider.settings.slider_speed.label",
      "default": 5000
    },
    {
      "type": "range",
      "id": "slider_duration",
      "min": 500,
      "max": 2000,
      "step": 250,
      "unit": "ms",
      "label": "t:settings_schema.slider.settings.slider_duration.label",
      "default": 1000
    },
    {
      "type": "checkbox",
      "id": "slider_autoplay",
      "label": "t:settings_schema.slider.settings.slider_autoplay.label",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "slider_loop",
      "label": "t:settings_schema.slider.settings.slider_loop.label",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "slider_mousedrag",
      "label": "t:settings_schema.slider.settings.slider_mousedrag.label",
      "default": false
    },
    {
      "type": "header",
      "content": "Spacing Options"
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Margin Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Padding Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 0
    }
  ],
  "blocks": [
    {
      "type": "child-type",
      "name": "t:sections.property_types.blocks.type.name",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:sections.property_types.blocks.type.image"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "t:sections.property_types.settings.heading.label"
        },
        {
          "type": "textarea",
          "id": "desc",
          "label": "t:sections.property_types.blocks.type.desc"
        },
        {
          "type": "url",
          "id": "url",
          "label": "t:sections.property_types.blocks.type.url"
        }
      ]
    }
  ],
  "presets": [
  {
    "name": "Property Types",
    "category": "Blog",
    "settings": {
      "heading": "Property Types"
    },
    "blocks": [
      {
        "type": "child-type",
        "settings": {
          "image": "",
          "heading": "",
          "desc": "",
          "url": ""
        }
      }
    ]
  }
]


}
{% endschema %}
